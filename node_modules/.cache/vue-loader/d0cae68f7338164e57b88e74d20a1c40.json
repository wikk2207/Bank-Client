{"remainingRequest":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/src/components/LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/src/components/LoginPage.vue","mtime":1574715011704},{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/vuetify-loader/lib/loader.js","mtime":1567240333000},{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IHNoYTNfNTEyIH0gZnJvbSAianMtc2hhMyI7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAiaHR0cDovL2xvY2FsaG9zdDo0MDAwIjsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXIvaW5kZXgnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpblBhZ2UiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAgc25hY2tiYXI6IGZhbHNlLAogICAgICB0aW1lb3V0OiAzMDAwLAogICAgICBzbmFja1RleHQ6ICIiLAogICAgICBzaG93UGFzc3dvcmQ6IGZhbHNlLAogICAgICBpbnB1dDogewogICAgICAgIGxvZ2luOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICByZXF1aXJlZDogdmFsdWUgPT4gewogICAgICAgICAgcmV0dXJuICEhdmFsdWUgfHwgIlBvbGUgbmllIG1vxbxlIGJ5xIcgcHVzdGUiOwogICAgICAgIH0sCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBoYW5kbGVQcmVzc0xvZ2luKCkgewogICAgICAgIGlmICgKICAgICAgICB0aGlzLmlucHV0LmxvZ2luID09PSAiIiB8fAogICAgICAgIHRoaXMuaW5wdXQucGFzc3dvcmQgPT09ICIiIAogICAgICApIHsKICAgICAgICB0aGlzLnNuYWNrVGV4dCA9ICJQb2xhIG5pZSBtb2fEhSBiecSHIHB1c3RlIjsKICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFzcyA9IGF3YWl0IHNoYTNfNTEyKHRoaXMuaW5wdXQucGFzc3dvcmQgKyB0aGlzLmlucHV0LmxvZ2luKTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoIi9hcGkvbG9naW4iLCB7CiAgICAgICAgICAgIGxvZ2luOiB0aGlzLmlucHV0LmxvZ2luLAogICAgICAgICAgICBwYXNzd29yZDogcGFzcwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKAogICAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzICE9IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5zbmFja1RleHQgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5zbmFja1RleHQgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvcmVnaXN0ZXIiKTsKICAgICAgICAgICAgICAgICAgLy9yb3V0ZXIucHVzaCh7bmFtZTonaGlzdG9yeScsIHBhcmFtczoge2lkOiByZXNwb25zZS5kYXRhLmlkLCB0b2tlbjogcmVzcG9uc2UuZGF0YS50b2tlbn19KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IgPT4gewogICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovCiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVQcmVzc1JlZ2lzdGVyKCkgewogICAgICByb3V0ZXIucHVzaCgiL3JlZ2lzdGVyIik7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app id=\"inspire\">\n    <v-content>\n      <v-container class=\"fill-height\" fluid>\n        <v-row align=\"center\" justify=\"center\">\n          <v-col cols=\"12\" sm=\"8\" md=\"4\">\n            <v-card class=\"elevation-12\">\n              <v-card-text>\n                <v-form>\n                  <v-text-field\n                    v-model=\"input.login\"\n                    label=\"Login\"\n                    name=\"login\"\n                    type=\"text\"\n                    :rules=\"[rules.required]\"\n                  />\n                  <v-text-field\n                    v-model=\"input.password\"\n                    id=\"password\"\n                    label=\"Hasło\"\n                    name=\"password\"\n                    :append-icon=\"showPassword ? 'visibility' : 'visibility_off'\"\n                    :type=\"showPassword ? 'text' : 'password'\"\n                    :rules=\"[rules.required]\"\n                    @click:append=\"showPassword = !showPassword\"\n                  />\n                </v-form>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer />\n                <v-btn text small @click=\"handlePressForgetPassword()\">Nie pamiętam hasła</v-btn>\n                <v-btn @click=\"handlePressLogin()\" color=\"primary\">Zaloguj się</v-btn>\n                <v-btn text @click=\"handlePressRegister()\" class=\"btn-register\">Zarejestruj się</v-btn>\n              </v-card-actions>\n            </v-card>\n            <v-snackbar v-model=\"snackbar\" :timeout=\"timeout\">\n              {{ snackText }}\n              <v-btn color=\"blue\" text @click=\"snackbar = false\">Zamknij</v-btn>\n            </v-snackbar>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { sha3_512 } from \"js-sha3\";\naxios.defaults.baseURL = \"http://localhost:4000\";\nimport router from '../router/index';\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n       snackbar: false,\n      timeout: 3000,\n      snackText: \"\",\n      showPassword: false,\n      input: {\n        login: \"\",\n        password: \"\"\n      },\n      rules: {\n        required: value => {\n          return !!value || \"Pole nie może być puste\";\n        },\n      }\n    };\n  },\n  methods: {\n    async handlePressLogin() {\n        if (\n        this.input.login === \"\" ||\n        this.input.password === \"\" \n      ) {\n        this.snackText = \"Pola nie mogą być puste\";\n        this.snackbar = true;\n      } else {\n        var pass = await sha3_512(this.input.password + this.input.login);\n        axios\n          .post(\"/api/login\", {\n            login: this.input.login,\n            password: pass\n          })\n          .then(\n            response => {\n              if (response.data.status != 200) {\n                this.snackText = response.data.message;\n                this.snackbar = true;\n              } else {\n                this.snackText = response.data.message;\n                this.snackbar = true;\n                  localStorage.setItem('token', response.data.token);\n                  router.push(\"/register\");\n                  //router.push({name:'history', params: {id: response.data.id, token: response.data.token}})\n              }\n            },\n            error => {\n              /* eslint-disable no-console */\n              console.log(error);\n              /* eslint-enable no-console */\n            }\n          );\n      }\n    },\n    handlePressRegister() {\n      router.push(\"/register\");\n    }\n  }\n};\n</script>"]}]}