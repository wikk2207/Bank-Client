{"remainingRequest":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/src/components/RegistrationPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/src/components/RegistrationPage.vue","mtime":1574604343465},{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/vuetify-loader/lib/loader.js","mtime":1567240333000},{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/wiksa/PWR/VSem/lista5/bank/Bank-Client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IHNoYTNfNTEyIH0gZnJvbSAianMtc2hhMyI7CnZhciB2YWxpZGF0b3IgPSByZXF1aXJlKCJlbWFpbC12YWxpZGF0b3IiKTsKYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9ICJodHRwOi8vbG9jYWxob3N0OjQwMDAiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlZ2lzdHJhdGlvblBhZ2UiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzbmFja2JhcjogZmFsc2UsCiAgICAgIHRpbWVvdXQ6IDMwMDAsCiAgICAgIHNuYWNrVGV4dDogIiIsCiAgICAgIHNob3dQYXNzd29yZDogZmFsc2UsCiAgICAgIGlucHV0OiB7CiAgICAgICAgbG9naW46ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBwYXNzd29yZDE6ICIiLAogICAgICAgIHBhc3N3b3JkMjogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICByZXF1aXJlZDogdmFsdWUgPT4gewogICAgICAgICAgcmV0dXJuICEhdmFsdWUgfHwgIlBvbGUgbmllIG1vxbxlIGJ5xIcgcHVzdGUiOwogICAgICAgIH0sCiAgICAgICAgZW1haWw6IHZhbHVlID0+IHsKICAgICAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGUodmFsdWUpIHx8ICJOaWVwb3ByYXdueSBlbWFpbCI7CiAgICAgICAgfSwKICAgICAgICBwYXNzd29yZDogdmFsdWUgPT4gewogICAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+PSA2IHx8ICJIYXPFgm8gbXVzaSB6YXdpZXJhxIcgbWluaW11bSA2IHpuYWvDs3ciOwogICAgICAgIH0sCiAgICAgICAgcGFzc3dvcmRNYXRjaDogdmFsdWUgPT4gewogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdGhpcy5pbnB1dC5wYXNzd29yZDEubG9jYWxlQ29tcGFyZSh2YWx1ZSkgPT09IDAgfHwKICAgICAgICAgICAgIkhhc8WCYSByw7PFvG5pxIUgc2nEmSIKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaGFuZGxlUHJlc3NSZWdpc3RlcigpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMuaW5wdXQubG9naW4gPT09ICIiIHx8CiAgICAgICAgdGhpcy5pbnB1dC5lbWFpbCA9PT0gIiIgfHwKICAgICAgICB0aGlzLmlucHV0LnBhc3N3b3JkMSA9PT0gIiIgfHwKICAgICAgICB0aGlzLmlucHV0LnBhc3N3b3JkMiA9PT0gIiIKICAgICAgKSB7CiAgICAgICAgdGhpcy5zbmFja1RleHQgPSAiUG9sYSBuaWUgbW9nxIUgYnnEhyBwdXN0ZSI7CiAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgIXZhbGlkYXRvci52YWxpZGF0ZSh0aGlzLmlucHV0LmVtYWlsKSB8fAogICAgICAgICF0aGlzLmlucHV0LnBhc3N3b3JkMS5sb2NhbGVDb21wYXJlKHRoaXMuaW5wdXQucGFzc3dvcmQyKSA9PT0gMCB8fAogICAgICAgICF0aGlzLmlucHV0LnBhc3N3b3JkMSA+PSA2CiAgICAgICkgewogICAgICAgIHRoaXMuc25hY2tUZXh0ID0gIk5pZXByYXdpZMWCb3dlIGRhbmUiOwogICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXNzID0gYXdhaXQgc2hhM181MTIodGhpcy5pbnB1dC5wYXNzd29yZDEgKyB0aGlzLmlucHV0LmxvZ2luKTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoIi9hcGkvcmVnaXN0ZXIiLCB7CiAgICAgICAgICAgIGxvZ2luOiB0aGlzLmlucHV0LmxvZ2luLAogICAgICAgICAgICBlbWFpbDogdGhpcy5pbnB1dC5lbWFpbCwKICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3MKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigKICAgICAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyAhPSAyMDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuc25hY2tUZXh0ID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuc25hY2tUZXh0ID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICAgICAgICAgICAgICAgIH0sIDMwMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IgPT4gewogICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovCiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVQcmVzc0xvZ2luKCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["RegistrationPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegistrationPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app id=\"inspire\">\n    <v-content>\n      <v-container class=\"fill-height\" fluid>\n        <v-row align=\"center\" justify=\"center\">\n          <v-col cols=\"12\" sm=\"8\" md=\"4\">\n            <v-card class=\"elevation-12\">\n              <v-card-text>\n                <v-form>\n                  <v-text-field\n                    v-model=\"input.login\"\n                    label=\"Login\"\n                    name=\"login\"\n                    type=\"text\"\n                    :rules=\"[rules.required]\"\n                  />\n                  <v-text-field\n                    v-model=\"input.email\"\n                    label=\"Adres e-mail\"\n                    name=\"email\"\n                    type=\"email\"\n                    :rules=\"[rules.required, rules.email]\"\n                  />\n                  <v-text-field\n                    v-model=\"input.password1\"\n                    label=\"Hasło\"\n                    name=\"password1\"\n                    :append-icon=\"showPassword ? 'visibility' : 'visibility_off'\"\n                    :type=\"showPassword ? 'text' : 'password'\"\n                    :rules=\"[rules.required, rules.password]\"\n                    @click:append=\"showPassword = !showPassword\"\n                  />\n                  <v-text-field\n                    v-model=\"input.password2\"\n                    label=\"Powtórz hasło\"\n                    name=\"password2\"\n                    :append-icon=\"showPassword ? 'visibility' : 'visibility_off'\"\n                    :type=\"showPassword ? 'text' : 'password'\"\n                    :rules=\"[rules.required, rules.passwordMatch]\"\n                    @click:append=\"showPassword = !showPassword\"\n                  />\n                </v-form>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer />\n                <v-btn @click=\"handlePressRegister()\" color=\"primary\">Zarejestruj się</v-btn>\n                <v-btn text @click=\"handlePressLogin()\">Zaloguj się</v-btn>\n              </v-card-actions>\n            </v-card>\n            <v-snackbar v-model=\"snackbar\" :timeout=\"timeout\">\n              {{ snackText }}\n              <v-btn color=\"blue\" text @click=\"snackbar = false\">Zamknij</v-btn>\n            </v-snackbar>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { sha3_512 } from \"js-sha3\";\nvar validator = require(\"email-validator\");\naxios.defaults.baseURL = \"http://localhost:4000\";\nexport default {\n  name: \"RegistrationPage\",\n  data() {\n    return {\n      snackbar: false,\n      timeout: 3000,\n      snackText: \"\",\n      showPassword: false,\n      input: {\n        login: \"\",\n        email: \"\",\n        password1: \"\",\n        password2: \"\"\n      },\n      rules: {\n        required: value => {\n          return !!value || \"Pole nie może być puste\";\n        },\n        email: value => {\n          return validator.validate(value) || \"Niepoprawny email\";\n        },\n        password: value => {\n          return value.length >= 6 || \"Hasło musi zawierać minimum 6 znaków\";\n        },\n        passwordMatch: value => {\n          return (\n            this.input.password1.localeCompare(value) === 0 ||\n            \"Hasła różnią się\"\n          );\n        }\n      }\n    };\n  },\n  methods: {\n    async handlePressRegister() {\n      if (\n        this.input.login === \"\" ||\n        this.input.email === \"\" ||\n        this.input.password1 === \"\" ||\n        this.input.password2 === \"\"\n      ) {\n        this.snackText = \"Pola nie mogą być puste\";\n        this.snackbar = true;\n      } else if (\n        !validator.validate(this.input.email) ||\n        !this.input.password1.localeCompare(this.input.password2) === 0 ||\n        !this.input.password1 >= 6\n      ) {\n        this.snackText = \"Nieprawidłowe dane\";\n        this.snackbar = true;\n      } else {\n        var pass = await sha3_512(this.input.password1 + this.input.login);\n        axios\n          .post(\"/api/register\", {\n            login: this.input.login,\n            email: this.input.email,\n            password: pass\n          })\n          .then(\n            response => {\n              if (response.data.status != 201) {\n                this.snackText = response.data.message;\n                this.snackbar = true;\n              } else {\n                this.snackText = response.data.message;\n                this.snackbar = true;\n                setTimeout(function() {\n                  window.location.href = \"/\";\n                }, 3000);\n              }\n            },\n            error => {\n              /* eslint-disable no-console */\n              console.log(error);\n              /* eslint-enable no-console */\n            }\n          );\n      }\n    },\n    handlePressLogin() {\n      window.location.href = \"/\";\n    }\n  }\n};\n</script>"]}]}